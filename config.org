* Emacs Configuration
** Disabling some stuff
#+BEGIN_SRC emacs-lisp
(tool-bar-mode -1)
(scroll-bar-mode -1)
(menu-bar-mode -1)
(setq ring-bell-function 'ignore)
(defalias 'yes-or-no-p 'y-or-n-p)
(column-number-mode)
(global-display-line-numbers-mode t)

(dolist (mode '(org-mode-hook
		term-mode-hook
		shell-mode-hook
		eshell-mode-hook))
  (add-hook mode (lambda () (display-line-numbers-mode m))))
#+END_SRC
** Changing the font
#+BEGIN_SRC emacs-lisp
(set-face-attribute 'default nil :font "CaskaydiaCove Nerd Font" :height 180)
#+END_SRC
** Setup the backup dir
#+BEGIN_SRC emacs-lisp
(setq backup-directory-alist '(("." . "~/.emacs-saves")))
#+END_SRC
** Enable prettify symbols
#+BEGIN_SRC emacs-lisp
(global-prettify-symbols-mode +1)
#+END_SRC
** Enable battery indicator
#+BEGIN_SRC emacs-lisp
(display-battery-mode 1)
#+END_SRC
** Change alignement
#+BEGIN_SRC emacs-lisp
(setq-default indent-tabs-mode nil)
(setq-default tab-width 4)
(setq indent-line-function 'insert-tab)
#+END_SRC
* Dashboard
#+BEGIN_SRC emacs-lisp
(use-package dashboard
    :ensure t
    :init
    (setq dashboard-startup-banner "~/.emacs.d/stignu.png")
    (setq dashboard-footer-messages '("In Devse, we trust"))
    (setq dashboard-banner-logo-title "Saint Ignucius welcomes you my child")
    (dashboard-setup-startup-hook))
#+END_SRC
* Evil mode 
#+BEGIN_SRC emacs-lisp
(use-package evil
	:ensure t
	:init
    (setq evil-want-keybinding nil)
	(evil-mode 1))

(use-package evil-org
    :ensure t
    :config
    (add-hook 'org-mode-hook 'evil-org-mode)
    (add-hook 'evil-org-mode-hook
	    (lambda ()
            (evil-org-set-key-theme)))
    (evil-org-set-key-theme
	  '(textobjects insert navigation additional shift todo heading))
    (add-hook 'org-mode-hook (lambda () (evil-org-mode)))
    (require 'evil-org-agenda))

(use-package evil-collection
    :ensure t
    :init
    (evil-collection-init))

(use-package powerline-evil
    :ensure t
    :config
    (powerline-evil-vim-color-theme))
#+END_SRC

* Ivy
#+BEGIN_SRC emacs-lisp
    (use-package ivy
      :diminish
      :bind (("C-s" . swiper)
	     :map ivy-minibuffer-map
	     ("TAB" . ivy-alt-done)
	     ("C-l" . ivy-alt-done)
	     ("C-j" . ivy-next-line)
	     ("C-k" . ivy-previous-line)
	     :map ivy-switch-buffer-map
	     ("C-k" . ivy-previous-line)
	     ("C-l" . ivy-done)
	     ("C-d" . ivy-switch-buffer-kill)
	     :map ivy-reverse-i-search-map
	     ("C-k" . ivy-previous-line)
	     ("C-d" . ivy-reverse-i-search-kill))
      :init (ivy-mode 1))

(use-package ivy-rich
  :init (ivy-rich-mode 1))
#+END_SRC
* Counsel
#+BEGIN_SRC emacs-lisp
(use-package counsel
  :bind (("M-x" . counsel-M-x)
         ("C-x b" . counsel-ibuffer)
         ("C-x C-f" . counsel-find-file)
         ("C-M-l" . counsel-imenu)
         :map minibuffer-local-map
         ("C-r" . 'counsel-minibuffer-history))
  :custom
  (counsel-linux-app-format-function #'counsel-linux-app-format-function-name-only)
  :config
  (setq ivy-initial-inputs-alist nil))
#+END_SRC
* Rainbow Delimiters
#+BEGIN_SRC emacs-lisp
(use-package rainbow-delimiters
  :hook (prog-mode . rainbow-delimiters-mode))
#+END_SRC
* Ewal
#+BEGIN_SRC emacs-lisp
(use-package ewal-doom-themes
    :ensure t
    :init
    (load-theme 'ewal-doom-vibrant t)
    (enable-theme 'ewal-doom-vibrant))
#+END_SRC
* Org mode
#+BEGIN_SRC emacs-lisp
(setq org-adapt-indentation nil)
(setq org-src-preserve-indentation t)
(setq org-startup-folded t)
#+END_SRC
* Elfeed
** Package
#+BEGIN_SRC emacs-lisp
(use-package elfeed
    :config
     (setq-default elfeed-search-filter "@1-week-ago +unread ")
    :ensure t)
#+END_SRC 
** Feeds
#+BEGIN_SRC emacs-lisp
(setq elfeed-feeds (quote
                      (("https://www.reddit.com/r/devse.rss" reddit devse)
                       ("https://hnrss.org/frontpage" hackernews prog)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCVls1GmFKf6WlTraIb_IaJg" youtube linux)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCLhcQ0bBZTLipRJ7D42Riow" youtube music)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UClcE-kVhqyiHCcjYwcpfj9w" youtube infosec)
                       ("https://www.youtube.com/feeds/vidoes.xml?channel_id=UCM0B2tvEttmL-gFP1_sgvSA" youtube music)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCld68syR8Wi-GY_n4CaoJGA" youtube linux)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCQUMjdiwuIYbH-oveKmOdZg" youtube music)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCkmEoZbpH7jPCe1_Ym4XJdQ" youtube music)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCM64dJz1HdlmYlZ8xYSO8TA" youtube music)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCAR30oDTNbJE-Zd2NDg1mTQ" youtube music)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCy27yRGCANDSrvQWzh5VuNA" youtube music)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCK33kufuprDPsfRPkMfgoRA" youtube music)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCJcnvMekEXIlw4Q5o_aoiMw" youtube music)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCAcAnMF0OrCtUep3Y4M-ZPw" youtube fr news)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCgN1463ngpGdCpAbCBGFteg" youtube music)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCJcYRr8rpsxVPfWA5vkuxFw" youtube music comedy)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCVeW9qkBjo3zosnqUbG7CFw" youtube infosec)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UC2eYFnH61tmytImy1mTYvhA" youtube linux)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCjFaPUcJU1vwk193mnW_w1w" youtube retrotech homebrew)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCS0N5baNlQWJCUrhCEo8WlA" youtube prog lowlevel)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCrh0I8I0l6eAj2DuW0GE_Fg" youtube music)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UC599MoN2FAQyhHeopdKDHqA" youtube music)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCfVczXnryp-xB2xBG3ocUgw" youtube music)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UC-lHJZR3Gqxm24_Vd_AJ5Yw" youtube comedy)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCW6xlqxSY3gGur4PkGPEUeA" youtube infosec)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCJKdHhXovF8tsWa9bCKOZTg" youtube music)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UC3S8vxwRfqLBdIhgRlDRVzw" youtube infosec)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCk20cSRhH_ms_Yk1AZItFqA" youtube music)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCeeFfhMcJa1kjtfZAGskOCA" youtube tech news)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCYaSz9Ywjgv7J_Wjdx2Y37A" youtube music)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCmcqSvN5dAHPOY5zVsLUrOg" youtube music)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCjr2bPAyPV7t35MvcgT3W8Q" youtube infosec)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCEp20NgOZHmgWdbQdHSxgjw" youtube retrotech)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCEbYhDd6c6vngsF5PQpFVWg" youtube functional prog)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCsnGwSIHyoYN0kiINAGUKxg" youtube linux)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCkMYR1Nerqm5U6LQZpayMhg" youtube music)
                       ("https://www.youtube.com/feeds/videos.xml?channel_id=UCVbRGNXwrOMEZ1qzGBPf-ow" youtube music)
                       ("https://www.reddit.com/r/osdev.rss" reddit prog))))
#+END_SRC
** Mpv
#+BEGIN_SRC emacs-lisp
(defun browse-url-mpv (url &optional new-window)
    (start-process "mpv" "*mpv*" "mpv" url))

(defun browse-url-surf (url &optional new-window)
    (start-process "surf" "*surf*" "surf" url))

(setq browse-url-browser-function '(("https:\\/\\/www\\.youtube." . browse-url-mpv)
    ("." . browse-url-surf)))
#+END_SRC
* Ranger
#+BEGIN_SRC emacs-lisp
(use-package ranger
    :ensure t
    :init
    (ranger-override-dired-mode t)
    :bind (("C-x C-d" . ranger)))
#+END_SRC

* Treemacs
#+BEGIN_SRC emacs-lisp
(use-package treemacs
    :ensure t
    :bind (("<f8>" . treemacs)))

(use-package treemacs-evil
    :ensure t)
#+END_SRC

* Multiple cursor
#+BEGIN_SRC emacs-lisp
(use-package multiple-cursors
    :ensure t
    :bind (("C-<down>" . mc/mark-next-like-this)
        ("C-<up>" . mc/mark-previous-like-this)))

#+END_SRC

* PDF tools
#+BEGIN_SRC emacs-lisp
(use-package pdf-tools
    :ensure t
    :preface
    (pdf-tools-install))
#+END_SRC
* Emoji with emacs
#+BEGIN_SRC emacs-lisp
(use-package emojify
    :ensure t
    :hook (after-init . global-emojify-mode))
#+END_SRC
* Doom modeline
#+BEGIN_SRC emacs-lisp
(use-package all-the-icons
    :ensure t)
    
(use-package doom-modeline
    :ensure t
    :hook (after-init . doom-modeline-mode)
    :config
    (setq doom-modeline-buffer-file-name-style 'auto)
    (setq doom-modeline-major-mode-icon t)
    (setq doom-modeline-major-mode-color-icon t)
    (setq doom-modeline-vcs-max-length 12)
    (setq doom-modeline-number-limit 99)
    (setq doom-modeline-lsp t))
#+END_SRC

* Company mode
#+BEGIN_SRC emacs-lisp
(use-package company
    :ensure t
    :init (global-company-mode))
#+END_SRC
* Programming
** Autocomplete
#+BEGIN_SRC emacs-lisp
(use-package auto-complete
    :ensure t
    :after (go-autocomplete)
    :init (global-autocomplete-mode)
    :config
    (require 'go-autocomplete)
    (ac-config-default))
#+END_SRC
** Flycheck
#+BEGIN_SRC emacs-lisp
(use-package flycheck
  :ensure t
  :init (global-flycheck-mode))
#+END_SRC
** LSP
#+BEGIN_SRC emacs-lisp
(use-package lsp-mode
    :ensure t
    :init
    (setq lsp-keymap-prefix "C-c l")
    (setq lsp-clients-clangd-executable "/usr/bin/clangd")
    :hook
    (python-mode . lsp)
    (c-mode . lsp)
    (rust-mode . lsp)
    (go-mode . lsp))
    
(use-package lsp-ivy :commands lsp-ivy-workspace-symbol)
(use-package lsp-treemacs :commands lsp-treemacs-errors-list)
#+END_SRC
** Haskell
*** Mode
#+BEGIN_SRC emacs-lisp
(use-package haskell-mode
  :ensure t
  :config
  (require 'haskell-interactive-mode)
  (require 'haskell-process)
  (add-hook 'haskell-mode-hook 'interactive-haskell-mode))
#+END_SRC
** Go
#+BEGIN_SRC emacs-lisp
(setenv "GOPATH" (concat "/home/" (getenv "USER") "/go"))

(use-package go-mode
    :ensure t)

(use-package go-autocomplete
    :ensure t)
#+END_SRC

** Rust
#+BEGIN_SRC emacs-lisp
(use-package rust-mode
    :bind (("C-c C-c" . rust-run))
    :ensure t)
#+END_SRC
